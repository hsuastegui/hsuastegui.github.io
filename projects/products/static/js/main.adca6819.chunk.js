(window["webpackJsonppractical-test"]=window["webpackJsonppractical-test"]||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),u=n.n(c),l=n(1),o=n.n(l),i=n(4),s=n(2),m=n(8),d=["branch1.json","branch2.json","branch3.json"],f=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(d.map((function(e){return fetch("/api/".concat(e))}))).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(e){return e.reduce((function(e,t){var n=t.products;return[].concat(Object(m.a)(e),Object(m.a)(n))}),[])})).catch((function(e){return[]}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=n(6),h=n(7),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new Intl.NumberFormat("en",{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)},E=function(e){return e.reduce((function(e,t){var n=Object(h.a)({},t);return n.revenue=t.unitPrice*t.sold,e.hasOwnProperty(t.id)&&(n.sold+=e[t.id].sold,n.revenue+=e[t.id].revenue),delete n.unitPrice,Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},t.id,n))}),{})},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return Object.values(e).sort((function(e,n){if("name"===t){var r=e[t].toLowerCase(),a=n[t].toLowerCase();return r<a?-1:r>a?1:0}return n[t]-e[t]}))};var j=function(e){var t=e.item;return a.a.createElement("tr",null,a.a.createElement("td",{className:"left"},t.name),a.a.createElement("td",{className:"right"},p(t.sold,0)),a.a.createElement("td",{className:"right"},p(t.revenue)))};var g=function(e){var t=e.data;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"left"},"Product"),a.a.createElement("th",{className:"right"},"Units sold"),a.a.createElement("th",{className:"right"},"Revenue"))),a.a.createElement("tbody",null,t.map((function(e){return a.a.createElement(j,{key:e.id,item:e})}))),a.a.createElement("tfoot",null,a.a.createElement("tr",null,a.a.createElement("td",{className:"left"},"Total"),a.a.createElement("td",{className:"right"},p(t.reduce((function(e,t){return e+t.sold}),0),0)),a.a.createElement("td",{className:"right"},p(t.reduce((function(e,t){return e+t.revenue}),0))))))};var O=function(e){var t=e.term,n=e.data,c=Object(r.useState)(n),u=Object(s.a)(c,2),l=u[0],o=u[1];return Object(r.useEffect)((function(){""===t&&o(n),o(n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})))}),[n,t]),a.a.createElement(g,{data:l})};var w=function(e){var t=e.term,n=e.setTerm;return a.a.createElement("div",{className:"search"},a.a.createElement("label",null,"Search Products"),a.a.createElement("input",{type:"text",onChange:function(e){n(e.target.value)},value:t}))},N={loading:!0,error:!1};var x=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),l=Object(s.a)(u,2),m=l[0],d=l[1],v=Object(r.useState)(N),h=Object(s.a)(v,2),p=h[0],j=h[1],g=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:(t=e.sent).length?(j({loading:!1,error:!1}),c(b(E(t)))):j({loading:!1,error:!0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g()}),[]),p.loading?a.a.createElement("p",null,"Loading..."):p.error?a.a.createElement("p",null,"Something went wrong"):a.a.createElement("div",{className:"product-list"},a.a.createElement(w,{term:m,setTerm:d}),a.a.createElement(O,{term:m,data:n}))};n(17);u.a.render(a.a.createElement(x,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.adca6819.chunk.js.map